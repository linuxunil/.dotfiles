#!/bin/bash
# Hyprland TTY launch script
# Generated by Ansible for {{ ansible_hostname }}

# Set up environment variables for Wayland
export XDG_SESSION_TYPE=wayland
export XDG_SESSION_DESKTOP=Hyprland
export XDG_CURRENT_DESKTOP=Hyprland

# Wayland-specific variables
export WAYLAND_DISPLAY=wayland-0
export WLR_NO_HARDWARE_CURSORS=1  # Helps with some hardware issues
export WLR_RENDERER=auto          # Auto-detect best renderer

# Qt applications
export QT_QPA_PLATFORM=wayland
export QT_WAYLAND_DISABLE_WINDOWDECORATION=1

# GTK applications  
export GDK_BACKEND=wayland
export GTK_THEME=Adwaita:dark

# Firefox
export MOZ_ENABLE_WAYLAND=1
export MOZ_WEBRENDER=1

# Java applications
export _JAVA_AWT_WM_NONREPARENTING=1

# Ensure XDG directories exist
mkdir -p "$XDG_RUNTIME_DIR"
mkdir -p "$HOME/.config"
mkdir -p "$HOME/.local/share"

# Start Hyprland with logging
exec Hyprland > "$HOME/.hyprland.log" 2>&1